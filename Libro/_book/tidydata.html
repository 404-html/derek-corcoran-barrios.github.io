<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>BIO 4022. Manipulación de datos e investigación reproducible en R</title>
  <meta name="description" content="Este libro es una compañia al curso BIO4022, análisis y manipulación de datos en R">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="BIO 4022. Manipulación de datos e investigación reproducible en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Este libro es una compañia al curso BIO4022, análisis y manipulación de datos en R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="BIO 4022. Manipulación de datos e investigación reproducible en R" />
  
  <meta name="twitter:description" content="Este libro es una compañia al curso BIO4022, análisis y manipulación de datos en R" />
  

<meta name="author" content="Derek Corcoran">


<meta name="date" content="2018-08-03">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="requerimientos.html">
<link rel="next" href="reproducible.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Manipupación de datos en R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Parte I</a></li>
<li class="chapter" data-level="1" data-path="requerimientos.html"><a href="requerimientos.html"><i class="fa fa-check"></i><b>1</b> Requerimientos</a><ul>
<li class="chapter" data-level="1.1" data-path="requerimientos.html"><a href="requerimientos.html#si-nunca-has-usado-r-antes"><i class="fa fa-check"></i><b>1.1</b> Si nunca has usado R antes</a></li>
<li class="chapter" data-level="1.2" data-path="requerimientos.html"><a href="requerimientos.html#descripcion"><i class="fa fa-check"></i><b>1.2</b> Descripción</a></li>
<li class="chapter" data-level="1.3" data-path="requerimientos.html"><a href="requerimientos.html#objetivos"><i class="fa fa-check"></i><b>1.3</b> Objetivos</a></li>
<li class="chapter" data-level="1.4" data-path="requerimientos.html"><a href="requerimientos.html#contenidos"><i class="fa fa-check"></i><b>1.4</b> Contenidos</a></li>
<li class="chapter" data-level="1.5" data-path="requerimientos.html"><a href="requerimientos.html#metodologia"><i class="fa fa-check"></i><b>1.5</b> Metodología</a></li>
<li class="chapter" data-level="1.6" data-path="requerimientos.html"><a href="requerimientos.html#evaluacion"><i class="fa fa-check"></i><b>1.6</b> Evaluación</a></li>
<li class="chapter" data-level="1.7" data-path="requerimientos.html"><a href="requerimientos.html#objetivo-del-curso"><i class="fa fa-check"></i><b>1.7</b> Objetivo del curso</a></li>
<li class="chapter" data-level="1.8" data-path="requerimientos.html"><a href="requerimientos.html#bibliografia"><i class="fa fa-check"></i><b>1.8</b> Bibliografía</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tidydata.html"><a href="tidydata.html"><i class="fa fa-check"></i><b>2</b> Tidy Data y manipulación de datos</a><ul>
<li class="chapter" data-level="2.1" data-path="tidydata.html"><a href="tidydata.html#tidy-data"><i class="fa fa-check"></i><b>2.1</b> Tidy data</a></li>
<li class="chapter" data-level="2.2" data-path="tidydata.html"><a href="tidydata.html#dplyr"><i class="fa fa-check"></i><b>2.2</b> dplyr</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tidydata.html"><a href="tidydata.html#summarize"><i class="fa fa-check"></i><b>2.2.1</b> summarize</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reproducible.html"><a href="reproducible.html"><i class="fa fa-check"></i><b>3</b> Investigación reproducible</a></li>
<li class="chapter" data-level="4" data-path="tidyverso.html"><a href="tidyverso.html"><i class="fa fa-check"></i><b>4</b> El Tidyverso</a></li>
<li class="chapter" data-level="5" data-path="visualizacion.html"><a href="visualizacion.html"><i class="fa fa-check"></i><b>5</b> Visualización de datos</a><ul>
<li class="chapter" data-level="5.1" data-path="visualizacion.html"><a href="visualizacion.html#el-esqueleto"><i class="fa fa-check"></i><b>5.1</b> El esqueleto</a></li>
<li class="chapter" data-level="5.2" data-path="visualizacion.html"><a href="visualizacion.html#geom_algo"><i class="fa fa-check"></i><b>5.2</b> geom_algo</a><ul>
<li class="chapter" data-level="5.2.1" data-path="visualizacion.html"><a href="visualizacion.html#una-variable-categorica-una-continua"><i class="fa fa-check"></i><b>5.2.1</b> Una variable categórica una continua</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="visualizacion.html"><a href="visualizacion.html#argumentos"><i class="fa fa-check"></i><b>5.3</b> Argumentos</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="modelos.html"><a href="modelos.html"><i class="fa fa-check"></i><b>6</b> Modelos en R</a></li>
<li class="chapter" data-level="7" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>7</b> Loops (purrr) y bibliografía (rticles)</a></li>
<li class="chapter" data-level="8" data-path="presentacion.html"><a href="presentacion.html"><i class="fa fa-check"></i><b>8</b> Presentaciones en R</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BIO 4022. Manipulación de datos e investigación reproducible en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidydata" class="section level1">
<h1><span class="header-section-number">Capítulo 2</span> Tidy Data y manipulación de datos</h1>
<p>En este capítulo explicaremos que es una base de datos <em>tidy</em> <span class="citation">(Wickham and others <a href="#ref-wickham2014tidy">2014</a>)</span> y aprenderemos a usar funciones del paquete <em>dplyr</em> <span class="citation">(Wickham et al. <a href="#ref-R-dplyr">2018</a>)</span> para manipular datos.</p>
<p>Recuerda que este libro es un apoyo para el curso BIO4022, puedes seguir la clase de este curso en este <a href="https://derek-corcoran-barrios.github.io/Clase1/Clase1TidyData">link</a>, y en cuanto el video de la clase este disponible encontrarás un link aca.</p>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">2.1</span> Tidy data</h2>
<p>Una base de datos tidy es una base de datos en la cuál (modificado de <span class="citation">(Leek <a href="#ref-leek2015elements">2015</a>)</span>):</p>
<ul>
<li>Cada varaible que midas debiera estar en una columna.</li>
<li>Cada observación distinta de esa variable debiera estar en una fila diferente.</li>
</ul>
<p>En general, la forma en que representarímos una base de datos <em>tidy</em> en <code>R</code> es usando un <em>data frame</em>.</p>
</div>
<div id="dplyr" class="section level2">
<h2><span class="header-section-number">2.2</span> dplyr</h2>
<p>El paquete <em>dplyr</em> es definido por sus autores como una gramática para la manipulación de datos. De este modo sus funciones son conocidas como verbos. Un resumen útil de muchas de estas funciones se encuentra en este <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">link</a>.</p>
<p>Este paquete tiene un gran número de verbos y sería difícil ver todos en una clase, en este capítulo nos enfocaremos en sus funciones más utilizadas, las cuales son:</p>
<ul>
<li><em>group_by</em> (agrupa datos)</li>
<li><em>summarize</em> (resume datos agrupados)</li>
<li><em>filter</em> (Encuentra filas con ciertas condiciones)</li>
<li><em>select</em> junto a <em>starts_with</em>, <em>ends_with</em> o <em>contains</em></li>
<li><em>mutate</em> (Genera variables nuevas)</li>
<li><em>%&gt;%</em> pipeline</li>
</ul>
<div id="summarize" class="section level3">
<h3><span class="header-section-number">2.2.1</span> summarize</h3>
<p>la función <code>summarize</code>, toma los datos de un data frame y las resume. Para usar esta función, el primer argumento que tomaríamos sería un data frame, seguido del nombre que queremos darle a una variable resumen, seguida del signo = y luego la formula a aplicar a una o mas columnas. Por ejemplo si tomaramos la base de datos <code>iris</code> <span class="citation">(Anderson <a href="#ref-anderson1935irises">1935</a>)</span>, que viene en <code>R</code>, y de las cual podemos ver parte de sus datos en la tabla <a href="tidydata.html#tab:iris">2.1</a></p>
<table>
<caption><span id="tab:iris">Tabla 2.1: </span>una tabla con 10 filas de la base de datos iris.</caption>
<thead>
<tr class="header">
<th align="right">Sepal.Length</th>
<th align="right">Sepal.Width</th>
<th align="right">Petal.Length</th>
<th align="right">Petal.Width</th>
<th align="left">Species</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">5.8</td>
<td align="right">4.0</td>
<td align="right">1.2</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr class="even">
<td align="right">4.7</td>
<td align="right">3.2</td>
<td align="right">1.6</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr class="odd">
<td align="right">5.1</td>
<td align="right">3.8</td>
<td align="right">1.9</td>
<td align="right">0.4</td>
<td align="left">setosa</td>
</tr>
<tr class="even">
<td align="right">5.2</td>
<td align="right">2.7</td>
<td align="right">3.9</td>
<td align="right">1.4</td>
<td align="left">versicolor</td>
</tr>
<tr class="odd">
<td align="right">6.4</td>
<td align="right">2.9</td>
<td align="right">4.3</td>
<td align="right">1.3</td>
<td align="left">versicolor</td>
</tr>
<tr class="even">
<td align="right">5.5</td>
<td align="right">2.5</td>
<td align="right">4.0</td>
<td align="right">1.3</td>
<td align="left">versicolor</td>
</tr>
<tr class="odd">
<td align="right">6.5</td>
<td align="right">3.0</td>
<td align="right">5.8</td>
<td align="right">2.2</td>
<td align="left">virginica</td>
</tr>
<tr class="even">
<td align="right">6.0</td>
<td align="right">2.2</td>
<td align="right">5.0</td>
<td align="right">1.5</td>
<td align="left">virginica</td>
</tr>
<tr class="odd">
<td align="right">6.1</td>
<td align="right">2.6</td>
<td align="right">5.6</td>
<td align="right">1.4</td>
<td align="left">virginica</td>
</tr>
<tr class="even">
<td align="right">5.9</td>
<td align="right">3.0</td>
<td align="right">5.1</td>
<td align="right">1.8</td>
<td align="left">virginica</td>
</tr>
</tbody>
</table>
<p>Si quisieramos resumir esa tabla y generar un par de variables que fueran la media y la deviación estándar de el largo del pétalo, lo haríamos con el siguiente código:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">Summary.Petal &lt;-<span class="st"> </span><span class="kw">summarize</span>(iris, <span class="dt">Mean.Petal.Length =</span> <span class="kw">mean</span>(Petal.Length), <span class="dt">SD.Petal.Length =</span> <span class="kw">sd</span>(Petal.Length))</a></code></pre></div>
<p>El resultado lo vemos en la tabla <a href="tidydata.html#tab:SummaryPetaltab">2.2</a>, en el cuál obtenemos los promedios y desviaciones estándar de los largos de los pétalos. Es importante notar</p>
<table>
<caption><span id="tab:SummaryPetaltab">Tabla 2.2: </span>Resumen del promedio y desviación estándar del largo de pétalo de las flores del generi Iris.</caption>
<thead>
<tr class="header">
<th align="right">Mean.Petal.Length</th>
<th align="right">SD.Petal.Length</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">3.758</td>
<td align="right">1.765298</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-wickham2014tidy">
<p>Wickham, Hadley, and others. 2014. “Tidy Data.” <em>Journal of Statistical Software</em> 59 (10). Foundation for Open Access Statistics: 1–23.</p>
</div>
<div id="ref-R-dplyr">
<p>Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2018. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
<div id="ref-leek2015elements">
<p>Leek, Jeff. 2015. “The Elements of Data Analytic Style.” <em>J. Leek.—Amazon Digital Services, Inc</em>.</p>
</div>
<div id="ref-anderson1935irises">
<p>Anderson, Edgar. 1935. “The Irises of the Gaspe Peninsula.” <em>Bulletin of the American Iris Society</em> 59: 2–5.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="requerimientos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reproducible.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["Libro.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
